## 問題 5.3 解答

### good-enough?とimprove演算は基本演算として使えると仮定

### レジスタ計算機言語での制御器の定義

```scm
(controller
  test-g
    (assign g (const 1.0))
    (test (op good-enough?) (reg g) (reg x))
    (branch (label sqrt-done))
    (assign g (op improve) (reg g) (reg x))
    (goto (label test-g))
  sqrt-done)
```

#### データパス図

![Alt text](http://g.gravizo.com/g?
  digraph G {
    guess [shape = box];
    x [shape = box];
    "1.0" [shape = triangle];
    improve [shape = invtrapezium];
    "good-enough?" [shape = doublecircle];
    "1.0" -> guess [label = "g<-1.0", arrowhead = odot, arrowsize = 2];
    guess -> "good-enough?";
    x -> "good-enough?";
    x -> "improve";
    guess -> improve [headport = n];
    improve -> guess [label = "g<-improve", arrowhead = odot, arrowsize = 2, headport = e, tailport = s];
  }
)

#### 制御図

![Alt text](http://g.gravizo.com/g?
  digraph G {
    graph [layout = circo];
    start [shape = none, style = ""];
    "g<-1.0" [shape = box];
    "good-enough?" [shape = diamond];
    done [shape = none, style = ""];
    "g<-improve" [shape = box];
    start -> "g<-1.0" -> "good-enough?";
    "good-enough?" -> done [label = "yes"];
    "good-enough?" -> "g<-improve" [label = "no", tailport = n];
    "g<-improve" -> "good-enough?" [tailport = e, headport = e];
  }
)
